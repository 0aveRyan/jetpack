{"version":3,"sources":["jetpack-connection-banner.js"],"names":["$","transitionSlideToIndex","index","nav","find","removeClass","contentContainer","children","eq","addClass","nextFeatureButtons","fullScreenContainer","fullScreenDismiss","wpWelcomeNotice","connectionBanner","connectionBannerDismiss","window","on","insertBefore","hide","data","action","nonce","jp_banner","connectionBannerNonce","dismissBanner","post","ajax_url","response","success","show","this","closest","css","document","keyup","e","keyCode","click","is","jQuery"],"mappings":";;CAGA,SAAYA,GA4CX,QAASC,GAAwBC,GAEhCC,EACEC,KAAM,4CACNC,YAAa,2CAEfC,EACEF,KAAM,wBACNC,YAAa,uBAGfF,EACEI,WACAC,GAAIN,GACJO,SAAU,2CAEZH,EACEC,WACAC,GAAIN,GACJO,SAAU,uBA9Db,GAAIN,GAAMH,EAAG,6CACZM,EAAmBN,EAAG,wCACtBU,EAAqBV,EAAG,8CACxBW,EAAsBX,EAAG,+BACzBY,EAAoBZ,EAAG,6BACvBa,EAAkBb,EAAG,kBACrBc,EAAmBd,EAAG,YACtBe,EAA0Bf,EAAG,6BAG9BA,GAAGgB,QAASC,GAAI,OAAQ,WACvBJ,EAAgBK,aAAcJ,KAI/BC,EAAwBE,GAAI,QAAS,WACpCjB,EAAGc,GAAmBK,MAEtB,IAAIC,IACHC,OAAQ,4BACRC,MAAOC,UAAUC,sBACjBC,eAAe,EAGhBzB,GAAE0B,KAAMH,UAAUI,SAAUP,EAAM,SAAUQ,IACtC,IAASA,EAASC,SACtB7B,EAAGc,GAAmBgB,WAKzB3B,EAAIc,GAAI,QAAS,+EAAgF,WAChGhB,EAAwBD,EAAG+B,MAAO7B,WAGnCQ,EAAmBO,GAAI,QAAS,WAK/BhB,EAJiBD,EAAG+B,MAClBC,QAAS,4BACT9B,QAEmC,KA4BtCU,EAAkBK,GAAI,QAAS,WAC9BjB,EAAGW,GAAsBQ,OAGzBnB,EAAG,QAASiC,IAAK,WAAY,aAG9BjC,EAAGkC,UAAWC,MAAO,SAAUC,GACzB,KAAOA,EAAEC,SACbrC,EAAGY,GAAoB0B,UAKpBtC,EAAGW,GAAsB4B,GAAI,aACjCvC,EAAG,QAASiC,IAAK,WAAY,WAE1BO","file":"../jetpack-connection-banner.min.js","sourcesContent":["/* Do not modify this file directly. It is compiled from other files. */\n/* global jQuery, jp_banner */\n\n( function( $ ) {\n\tvar nav = $( '.jp-wpcom-connect__vertical-nav-container' ),\n\t\tcontentContainer = $( '.jp-wpcom-connect__content-container' ),\n\t\tnextFeatureButtons = $( '.jp-banner__button-container .next-feature' ),\n\t\tfullScreenContainer = $( '.jp-connect-full__container' ),\n\t\tfullScreenDismiss = $( '.jp-connect-full__dismiss' ),\n\t\twpWelcomeNotice = $( '#welcome-panel' ),\n\t\tconnectionBanner = $( '#message' ),\n\t\tconnectionBannerDismiss = $( '.connection-banner-dismiss' );\n\n\t// Move the banner below the WP Welcome notice on the dashboard\n\t$( window ).on( 'load', function() {\n\t\twpWelcomeNotice.insertBefore( connectionBanner );\n\t} );\n\n\t// Dismiss the connection banner via AJAX\n\tconnectionBannerDismiss.on( 'click', function() {\n\t\t$( connectionBanner ).hide();\n\n\t\tvar data = {\n\t\t\taction: 'jetpack_connection_banner',\n\t\t\tnonce: jp_banner.connectionBannerNonce,\n\t\t\tdismissBanner: true\n\t\t};\n\n\t\t$.post( jp_banner.ajax_url, data, function( response ) {\n\t\t\tif ( true !== response.success ) {\n\t\t\t\t$( connectionBanner ).show();\n\t\t\t}\n\t\t} );\n\t} );\n\n\tnav.on( 'click', '.vertical-menu__feature-item:not( .vertical-menu__feature-item-is-selected )', function() {\n\t\ttransitionSlideToIndex( $( this ).index() );\n\t} );\n\n\tnextFeatureButtons.on( 'click', function() {\n\t\tvar slideIndex = $( this )\n\t\t\t.closest( '.jp-wpcom-connect__slide' )\n\t\t\t.index();\n\n\t\ttransitionSlideToIndex( slideIndex + 1 );\n\t} );\n\n\tfunction transitionSlideToIndex( index ) {\n\t\t// Remove classes from previously selected menu item and content\n\t\tnav\n\t\t\t.find( '.vertical-menu__feature-item-is-selected' )\n\t\t\t.removeClass( 'vertical-menu__feature-item-is-selected' );\n\n\t\tcontentContainer\n\t\t\t.find( '.jp__slide-is-active' )\n\t\t\t.removeClass( 'jp__slide-is-active' );\n\n\t\t// Add classes to selected menu item and content\n\t\tnav\n\t\t\t.children()\n\t\t\t.eq( index )\n\t\t\t.addClass( 'vertical-menu__feature-item-is-selected' );\n\n\t\tcontentContainer\n\t\t\t.children()\n\t\t\t.eq( index )\n\t\t\t.addClass( 'jp__slide-is-active' );\n\t}\n\n\t/**\n\t * Full-screen connection prompt\n\t */\n\tfullScreenDismiss.on( 'click', function() {\n\t\t$( fullScreenContainer ).hide();\n\n\t\t// Re-enable scrolling\n\t\t$( 'body' ).css( 'overflow', 'visible' );\n\t} );\n\n\t$( document ).keyup( function( e ) {\n\t\tif ( 27 === e.keyCode ) {\n\t\t\t$( fullScreenDismiss ).click();\n\t\t}\n\t} );\n\n\t// Prevent scrolling if full-page prompt is showing\n\tif ( $( fullScreenContainer ).is( ':visible' ) ) {\n\t\t$( 'body' ).css( 'overflow', 'hidden' );\n\t}\n} )( jQuery );\n"]}