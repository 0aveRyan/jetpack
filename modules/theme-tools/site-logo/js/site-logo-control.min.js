(function(c,b){var d=c.customize;d.controlConstructor.site_logo=d.Control.extend({ready:function(){var a=this.container.find(".customize-control-title").data();this.l10n=a.l10n;this.mime=a.mime;this.$imgContainer=b("#customize-control-site_logo .current");this.$btnContainer=b("#customize-control-site_logo .actions");this.$img=b('<img class="site-logo-thumbnail" />').prependTo(this.$imgContainer);this.$placeholder=b("<span>"+this.l10n.placeholder+"</span>").prependTo(this.$imgContainer);this.$btnAdd=
b('<button type="button" class="button new">'+this.l10n.upload+"</button>").prependTo(this.$btnContainer);this.$btnChange=b('<button type="button" class="button change">'+this.l10n.change+"</button>").prependTo(this.$btnContainer);this.$btnRemove=b('<button type="button" class="button remove">'+this.l10n.remove+"</button>").prependTo(this.$btnContainer);_.bindAll(this,"removeImg","upload","render","pick");this.$btnAdd.on("click",this.upload);this.$btnChange.on("click",this.upload);this.$btnRemove.on("click",
this.removeImg);this.setting.bind("change",this.render);this.render()},upload:function(a){a.preventDefault();this.frame||this.initFrame();this.frame.open()},initFrame:function(){this.frame=c.media({title:this.l10n.choose,library:{type:this.mime},button:{text:this.l10n.set},multiple:!1});this.frame.on("select",this.pick)},pick:function(){var a=this.frame.state().get("selection").first().toJSON(),a=this.reduceMembers(a);this.setting(a)},reduceMembers:function(a){var c={};b.each(["id","sizes","url"],
function(b,d){c[d]=a[d]});return c},render:function(){var a=this.setting();a&&a.url?(this.$placeholder.hide(),a.sizes&&a.sizes.medium?this.$img.attr("src",a.sizes.medium.url):this.$img.attr("src",a.url),this.$img.show(),this.$btnRemove.show(),this.$btnChange.show(),this.$btnAdd.hide()):(this.$img.hide(),this.$placeholder.show(),this.$btnRemove.hide(),this.$btnChange.hide(),this.$btnAdd.show())},removeImg:function(a){a.preventDefault();this.setting({url:"",id:0})}})})(this.wp,jQuery);